(function(c){c.fn.barousel=function(b){var a=c.extend({imageWrapper:".barousel_image",contentWrapper:".barousel_content",contentLinksWrapper:null,navWrapper:".barousel_nav",slideDuration:5E3,navType:1,fadeIn:1,fadeInSpeed:600,manualCarousel:0,contentResize:1,contentResizeSpeed:300,debug:0},b||{});a.imageWrapper=c(this).find(a.imageWrapper);a.contentWrapper=c(this).find(a.contentWrapper);a.contentLinksWrapper=c(a.contentLinksWrapper);a.navWrapper=c(this).find(a.navWrapper);a.imageList=a.imageWrapper.find("img").not("[class*=intro]"); a.contentList=a.contentWrapper.find("div").not("[class*=intro]");a.contentLinksList=a.contentLinksWrapper.find("a");a.imageIntro=a.imageWrapper.find("img[class*=intro]");a.contentIntro=a.contentWrapper.find("div[class*=intro]");a.currentIndex=0;a.totalItem=a.imageList.length;a.stopCarousel=0;a.timerCarousel;a.navFreeze=0;a.introActive=0;0<a.imageWrapper.find("img[class*=intro]").length&&(a.introActive=1);if(1!=a.totalItem){a.imageList.each(function(a){this.index=a});a.contentList.each(function(a){this.index= a});a.contentLinksList.each(function(a){this.index=a});if(a.imageList.length!=a.contentList.length)return 1==a.debug&&console.log("[Barousel error] images and contents must be the same number"),this;1==a.contentResize&&0==a.introActive&&c(a.contentWrapper).height(c(a.contentList[a.currentIndex]).height()+10);null!=a.contentLinksWrapper&&c(a.contentLinksList[a.currentIndex]).addClass("current");if(1==a.navType){var d="<ul>";a.imageList.each(function(b){var e="";b==0&&(e="current");d=d+("<li><a href='#' title='"+ c(a.contentList[b]).find("p.header").text()+"' class='"+e+"'>&nbsp;</a></li>")});d+="</ul>";a.navWrapper.append(d);a.navList=a.navWrapper.find("a");a.navList.each(function(a){this.index=a})}else 2==a.navType?(d="<ul>",d+="<li class='prev'><a href='#' title='previous'>&nbsp;</a></li>",d+="<li class='next'><a href='#' title='next'>&nbsp;</a></li>",d+="</ul><div class='counter'><span class='counter_current'>1</span>/<span class='counter_total'>"+a.totalItem+"</span></div>",a.navWrapper.append(d),a.navList= a.navWrapper.find("a")):3==a.navType&&(a.navList=a.navWrapper.find("a"),a.navList.each(function(a){this.index=a}));1==a.navType||3==a.navType?a.navList.each(function(b){c(this).click(function(){if(a.navFreeze==0){window.clearTimeout(a.timerCarousel);a.stopCarousel=1;if(a.currentIndex!=b||a.introActive==1){e(a,b);a.currentIndex=b}}a.introActive=0;return false})}):2==a.navType&&a.navList.each(function(){c(this).click(function(){if(a.navFreeze==0){window.clearTimeout(a.timerCarousel);a.stopCarousel= 1;if(c(this).parent().hasClass("prev")){var b;b=parseInt(a.currentIndex)==0?parseInt(a.totalItem)-1:parseInt(a.currentIndex)-1;e(a,b);a.currentIndex=b}else if(c(this).parent().hasClass("next")){b=parseInt(a.currentIndex)==parseInt(a.totalItem)-1?0:parseInt(a.currentIndex)+1;e(a,b);a.currentIndex=b}}a.introActive=0;return false})});0==a.manualCarousel&&(a.timerCarousel=window.setTimeout(function(){e(a,1)},a.slideDuration))}return this};var e=function(b,a){2!=b.navType&&(b.navList.each(function(){c(this).removeClass("current")}), c(b.navList[a]).addClass("current"));var d;d=1==b.introActive?c(b.imageIntro):c(b.imageList[b.currentIndex]);var g=c(b.imageList[a]);1==b.debug&&(console.log("[Barousel loadItem] currentImage:"+d.attr("src")),console.log("[Barousel loadItem] nextImage:"+g.attr("src")));d.hasClass("default")||d.attr("class","previous");g.attr("class","current");0==b.fadeIn?(g.show(),d.hide()):(b.navFreeze=1,c(b.contentList).hide(),g.fadeIn(b.fadeInSpeed,function(){d.hide();d.removeClass("previous");b.navFreeze=0})); h(b,a);if(0==b.stopCarousel){b.currentIndex=a;var f;f=b.currentIndex==b.totalItem-1?0:parseInt(b.currentIndex)+1;b.timerCarousel=window.setTimeout(function(){e(b,f)},b.slideDuration)}},h=function(b,a){1==b.introActive&&(c(b.contentIntro).hide(),c(b.contentWrapper).attr("class",""));1==b.contentResize&&parseInt(c(b.contentWrapper).height())!=parseInt(c(b.contentList[a]).height()+10)?c(b.contentWrapper).animate({height:c(b.contentList[a]).height()+10},b.contentResizeSpeed,function(){f(b,a)}):f(b,a); 2==b.navType&&c(b.navWrapper).find(".counter_current").text(a+1)},f=function(b,a){c(b.contentList).hide();c(b.contentList[a]).show();null!=b.contentLinksWrapper&&(c(b.contentLinksList).removeClass("current"),c(b.contentLinksList[a]).addClass("current"))}})(jQuery);